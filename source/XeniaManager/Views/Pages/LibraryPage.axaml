<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:XeniaManager.ViewModels.Pages"
             xmlns:icons="using:FluentIcons.Avalonia.Fluent"
             xmlns:controls="clr-namespace:FluentAvalonia.UI.Controls;assembly=FluentAvalonia"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="XeniaManager.Views.Pages.LibraryPage"
             x:DataType="vm:LibraryPageViewModel">
    <Design.DataContext>
        <vm:LibraryPageViewModel />
    </Design.DataContext>

    <!-- UI -->
    <Grid RowDefinitions="64,Auto,*">
        <!-- Search & Menu -->
        <Grid Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="64" />
            </Grid.ColumnDefinitions>

            <TextBox Grid.Column="0"
                     Padding="12,0"
                     VerticalContentAlignment="Center"
                     BorderThickness="0"
                     FontSize="24"
                     Watermark="Search..." />

            <Button Grid.Column="1"
                    Background="Transparent"
                    BorderThickness="0"
                    Cursor="Hand"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch">
                <icons:SymbolIcon Symbol="MoreVertical" />

                <Button.Flyout>
                    <MenuFlyout Placement="BottomEdgeAlignedRight">
                        <!-- Toggle View
                        <MenuItem Header="{Binding ViewToggleText}"
                                  Command="{Binding ToggleViewCommand}">
                            <MenuItem.Icon>
                                <icons:SymbolIcon Symbol="{Binding ViewToggleIcon}" />
                            </MenuItem.Icon>
                        </MenuItem>

                        <Separator /> -->

                        <!-- Scan Directory
                        <MenuItem x:Name="BtnScanDirectory"
                                  Header="Scan Directory">
                            <MenuItem.Icon>
                                <icons:SymbolIcon Symbol="Folder" />
                            </MenuItem.Icon>
                        </MenuItem>  -->

                        <MenuItem x:Name="BtnAddGame"
                                  Header="Add Game">
                            <MenuItem.Icon>
                                <icons:SymbolIcon Symbol="Add" />
                            </MenuItem.Icon>
                        </MenuItem>
                    </MenuFlyout>
                </Button.Flyout>
            </Button>
        </Grid>

        <!-- Zoom Slider -->
        <Grid Grid.Row="1" Margin="10,0"
              IsVisible="{Binding IsGridView}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <icons:SymbolIcon Grid.Column="0"
                              Symbol="ZoomOut"
                              FontSize="14"
                              Margin="0,0,8,0" />
            <Slider x:Name="SldLibraryZoom"
                    Grid.Column="1"
                    VerticalAlignment="Center"
                    IsSnapToTickEnabled="True"
                    Maximum="{Binding ZoomMaximum}"
                    Minimum="{Binding ZoomMinimum}"
                    MinHeight="0"
                    Padding="0"
                    TickFrequency="{Binding ZoomTickFrequency}"
                    Value="{Binding ZoomValue}"
                    ToolTip.Tip="{Binding ZoomToolTip}" />
            <icons:SymbolIcon Grid.Column="2"
                              Symbol="ZoomIn"
                              FontSize="14"
                              Margin="8,0,0,0" />
        </Grid>

        <!-- Games -->
        <ScrollViewer Grid.Row="2" Padding="8">
            <StackPanel>
                <!-- Grid View -->
                <controls:ItemsRepeater Margin="0,0,10,0"
                                        ItemsSource="{Binding DummyGames}"
                                        IsVisible="{Binding IsGridView}">
                    <controls:ItemsRepeater.Layout>
                        <controls:UniformGridLayout MinItemWidth="{Binding MinItemWidth}"
                                                    MinItemHeight="{Binding MinItemHeight}"
                                                    MinRowSpacing="{Binding ItemSpacing}"
                                                    MinColumnSpacing="{Binding ItemSpacing}"
                                                    ItemsStretch="Uniform" />
                    </controls:ItemsRepeater.Layout>

                    <controls:ItemsRepeater.ItemTemplate>
                        <DataTemplate x:DataType="x:String">
                            <Button Padding="0"
                                    BorderThickness="1"
                                    Cursor="Hand"
                                    HorizontalAlignment="Stretch"
                                    VerticalAlignment="Stretch"
                                    HorizontalContentAlignment="Center"
                                    VerticalContentAlignment="Center">
                                <StackPanel HorizontalAlignment="Center" Spacing="4">
                                    <icons:SymbolIcon Symbol="XboxController" FontSize="48" />
                                    <TextBlock Text="{Binding}" HorizontalAlignment="Center" />
                                </StackPanel>
                            </Button>
                        </DataTemplate>
                    </controls:ItemsRepeater.ItemTemplate>
                </controls:ItemsRepeater>

                <!-- List View 
                <controls:ItemsRepeater Margin="10,0,10,0"
                                        ItemsSource="{Binding DummyGames}"
                                        IsVisible="{Binding !IsGridView}">
                    <controls:ItemsRepeater.Layout>
                        <controls:StackLayout Orientation="Vertical" Spacing="4" />
                    </controls:ItemsRepeater.Layout>

                    <controls:ItemsRepeater.ItemTemplate>
                        <DataTemplate x:DataType="x:String">
                            <Button Padding="8,4"
                                    BorderThickness="1"
                                    Cursor="Hand"
                                    HorizontalAlignment="Stretch"
                                    HorizontalContentAlignment="Stretch">
                                <Grid ColumnDefinitions="48,*,120,120">
                                    <icons:SymbolIcon Grid.Column="0"
                                                      Symbol="XboxConsole"
                                                      FontSize="24" />

                                    <TextBlock Grid.Column="1"
                                               Text="{Binding}"
                                               VerticalAlignment="Center"
                                               Margin="12,0,0,0" />
                                    <TextBlock Grid.Column="2"
                                               Text="Playable"
                                               VerticalAlignment="Center"
                                               HorizontalAlignment="Center"
                                               Opacity="0.6" />
                                    <TextBlock Grid.Column="3"
                                               Text="Canary"
                                               VerticalAlignment="Center"
                                               HorizontalAlignment="Center"
                                               Opacity="0.6" />
                                </Grid>
                            </Button>
                        </DataTemplate>
                    </controls:ItemsRepeater.ItemTemplate>
                </controls:ItemsRepeater>-->
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>